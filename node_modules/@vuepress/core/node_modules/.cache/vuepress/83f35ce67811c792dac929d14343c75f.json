{"remainingRequest":"/Users/liheng/Documents/workspace/vuepress-element-extend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liheng/Documents/workspace/vuepress-element-extend/docs/.vuepress/components/UploadFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liheng/Documents/workspace/vuepress-element-extend/docs/.vuepress/components/UploadFile.vue","mtime":1588564335531},{"path":"/Users/liheng/Documents/workspace/vuepress-element-extend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liheng/Documents/workspace/vuepress-element-extend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXBsb2FkRmlsZScsCiAgaW5oZXJpdEF0dHJzOiBmYWxzZSwKICBwcm9wczogewogICAgc2hvd0ZpbGVMaXN0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmaWxlczogW10KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBmaWxlczogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAhdGhpcy5zaG93RmlsZUxpc3QgJiYKICAgICAgICAgIHRoaXMuZmlsZXMubGVuZ3RoICYmCiAgICAgICAgICB0aGlzLmZpbGVzLmV2ZXJ5KGl0ZW0gPT4gaXRlbS5zdGF0dXMgPT09ICdzdWNjZXNzJykKICAgICAgICApIHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLmZpbGVzLnNwbGljZSgwKQogICAgICAgICAgfSwgNTAwKQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6K6h566X5LiK5Lyg6L+b5bqmCiAgICBwYXJzZVBlcmNlbnRhZ2UodmFsKSB7CiAgICAgIGlmICh2YWwgPj0gOTkpIHsKICAgICAgICByZXR1cm4gOTkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsLCAxMCkKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOi/m+W6puadoQogICAgb25Qcm9ncmVzcyhldmVudCwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgdGhpcy5maWxlcyA9IGZpbGVMaXN0CiAgICB9LAogICAgLy8g5LiK5Lyg5aSx6LSlCiAgICBvbkVycm9yKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpCiAgICB9LAogICAgLy8g5Y+W5raI5LiK5LygCiAgICByZW1vdmUoZmlsZSkgewogICAgICB0aGlzLiRjb25maXJtKGDnoa7lrpropoHlj5bmtojkuIrkvKDor6Xmlofku7blkJfvvJ9gLCAn5o+Q56S6JywgeyB0eXBlOiAnd2FybmluZycgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQuYWJvcnQoZmlsZSkKICAgICAgICB0aGlzLmZpbGVzLnNwbGljZSh0aGlzLmZpbGVzLmluZGV4T2YoZmlsZSksIDEpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5YWz6Zet6L+b5bqm5p2hCiAgICBjbG9zZSgpIHsKICAgICAgaWYgKHRoaXMuZmlsZXMuZXZlcnkoaXRlbSA9PiBpdGVtLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSkgewogICAgICAgIHRoaXMuZmlsZXMuc3BsaWNlKDApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdW5VcGxvYWRlZEZpbGVzID0gdGhpcy5maWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnN0YXR1cyAhPT0gJ3N1Y2Nlc3MnKQogICAgICAgIHRoaXMuJGNvbmZpcm0oCiAgICAgICAgICBg5pyJICR7dW5VcGxvYWRlZEZpbGVzLmxlbmd0aH0g6aG55LiK5Lyg5Lu75Yqh5q2j5Zyo6L+b6KGM44CC56Gu5a6a6KaB5Y+W5raI5LiK5Lyg5ZCX77yfYCwKICAgICAgICAgICfmj5DnpLonLAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgIH0KICAgICAgICApLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy51cGxvYWQuYWJvcnQoKQogICAgICAgICAgdGhpcy5maWxlcy5zcGxpY2UoMCkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xpY2soZmlsZSkgewogICAgICB0aGlzLm9uUHJldmlldyAmJiB0aGlzLm9uUHJldmlldyhmaWxlKQogICAgfQogIH0KfQo="},{"version":3,"sources":["UploadFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadFile.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n  <el-upload\n    ref=\"upload\"\n    class=\"upload-file\"\n    v-bind=\"$attrs\"\n    :show-file-list=\"showFileList\"\n    :disabled=\"disabled\"\n    v-on=\"$listeners\"\n    :on-error=\"onError\"\n    :on-progress=\"onProgress\"\n  >\n    <slot name=\"trigger\" slot=\"trigger\"></slot>\n    <slot><el-button type=\"primary\" size=\"small\">点击上传</el-button></slot>\n    <slot name=\"tip\" slot=\"tip\"></slot>\n    <el-dialog\n      class=\"upload-dialog\"\n      title=\"上传列表\"\n      append-to-body\n      :visible.sync=\"!showFileList && files.length > 0\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n      :before-close=\"close\"\n    >\n      <transition-group\n        tag=\"ul\"\n        :class=\"['el-upload-list', 'el-upload-list--text', { 'is-disabled': disabled }]\"\n        name=\"el-list\"\n      >\n        <li\n          v-for=\"file in files\"\n          :class=\"['el-upload-list__item2', 'is-' + file.status]\"\n          :key=\"file.name\"\n        >\n          <a class=\"el-upload-list__item-name\" @click=\"handleClick(file)\">\n            <i class=\"el-icon-document\"></i>{{ file.name }}\n          </a>\n          <i\n            @click=\"file.status !== 'success' ? remove(file) : handleClick(file)\"\n            :class=\"{\n              'el-icon-success': file.status === 'success',\n              'el-icon-close': file.status !== 'success',\n              'circle-check': true\n            }\"\n          >\n          </i>\n          <el-progress\n            v-if=\"file.status === 'uploading'\"\n            type=\"line\"\n            :stroke-width=\"2\"\n            :percentage=\"parsePercentage(file.percentage)\"\n          >\n          </el-progress>\n        </li>\n      </transition-group>\n    </el-dialog>\n  </el-upload>\n</template>\n\n<script>\nexport default {\n  name: 'UploadFile',\n  inheritAttrs: false,\n  props: {\n    showFileList: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      files: []\n    }\n  },\n  watch: {\n    files: {\n      handler: function() {\n        if (\n          !this.showFileList &&\n          this.files.length &&\n          this.files.every(item => item.status === 'success')\n        ) {\n          setTimeout(() => {\n            this.files.splice(0)\n          }, 500)\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // 计算上传进度\n    parsePercentage(val) {\n      if (val >= 99) {\n        return 99\n      } else {\n        return parseInt(val, 10)\n      }\n    },\n    // 上传进度条\n    onProgress(event, file, fileList) {\n      this.files = fileList\n    },\n    // 上传失败\n    onError() {\n      this.$message.warning('上传失败，请重新上传')\n    },\n    // 取消上传\n    remove(file) {\n      this.$confirm(`确定要取消上传该文件吗？`, '提示', { type: 'warning' }).then(() => {\n        this.$refs.upload.abort(file)\n        this.files.splice(this.files.indexOf(file), 1)\n      })\n    },\n    // 关闭进度条\n    close() {\n      if (this.files.every(item => item.status === 'success')) {\n        this.files.splice(0)\n      } else {\n        const unUploadedFiles = this.files.filter(file => file.status !== 'success')\n        this.$confirm(\n          `有 ${unUploadedFiles.length} 项上传任务正在进行。确定要取消上传吗？`,\n          '提示',\n          {\n            type: 'warning'\n          }\n        ).then(() => {\n          this.$refs.upload.abort()\n          this.files.splice(0)\n        })\n      }\n    },\n    handleClick(file) {\n      this.onPreview && this.onPreview(file)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.upload-file {\n  display: inline-block;\n  .is-picture {\n    .el-upload {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n    }\n    .el-upload:hover {\n      border-color: #409eff;\n    }\n    .avatar-uploader-icon {\n      font-size: 28px;\n      color: #8c939d;\n      text-align: center;\n    }\n    .avatar {\n      display: block;\n    }\n  }\n}\n.upload-dialog {\n  .el-dialog__body {\n    padding: 15px !important;\n    .el-upload-list__item2 {\n      transition: all 0.5s cubic-bezier(0.55, 0, 0.1, 1);\n      font-size: 14px;\n      color: #48576a;\n      line-height: 1.8;\n      margin-top: 5px;\n      box-sizing: border-box;\n      border-radius: 4px;\n      width: 100%;\n      position: relative;\n      .circle-check {\n        position: absolute;\n        top: 2px;\n        right: 2px;\n        font-size: 20px;\n      }\n      .el-icon-success {\n        color: #13ce66;\n      }\n      .el-icon-close {\n        cursor: pointer;\n        opacity: 0.75;\n        color: #48576a;\n        -ms-transform: scale(0.7);\n        transform: scale(0.7);\n      }\n    }\n  }\n}\n</style>\n"]}]}