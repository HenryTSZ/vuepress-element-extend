---
title: 求和案例-模块化编码
date: 2022-08-29 23:02:55
permalink: /8db7ce/
---
### 7.模块化 + 命名空间

1. 目的：让代码更好维护，让多种数据分类更加明确。

2. 修改`store.js`

   ```javascript
   const countAbout = {
     namespaced:true,//开启命名空间
     state:{x:1},
     mutations: { ... },
     actions: { ... },
     getters: {
       bigSum(state){
          return state.sum * 10
       }
     }
   }

   const personAbout = {
     namespaced:true,//开启命名空间
     state:{ ... },
     mutations: { ... },
     actions: { ... }
   }

   const store = new Vuex.Store({
     modules: {
       countAbout,
       personAbout
     }
   })
   ```

3. 开启命名空间后，组件中读取 state 数据：

   ```js
   //方式一：自己直接读取
   this.$store.state.personAbout.list
   //方式二：借助 mapState 读取：
   ...mapState('countAbout',['sum','school','subject']),
   ```

4. 开启命名空间后，组件中读取 getters 数据：

   ```js
   //方式一：自己直接读取
   this.$store.getters['personAbout/firstPersonName']
   //方式二：借助 mapGetters 读取：
   ...mapGetters('countAbout',['bigSum'])
   ```

5. 开启命名空间后，组件中调用 dispatch

   ```js
   //方式一：自己直接 dispatch
   this.$store.dispatch('personAbout/addPersonWang',person)
   //方式二：借助 mapActions：
   ...mapActions('countAbout',{incrementOdd:'jiaOdd',incrementWait:'jiaWait'})
   ```

6. 开启命名空间后，组件中调用 commit

   ```js
   //方式一：自己直接 commit
   this.$store.commit('personAbout/ADD_PERSON',person)
   //方式二：借助 mapMutations：
   ...mapMutations('countAbout',{increment:'JIA',decrement:'JIAN'}),
   ```

:::demo <<< @/docs/vue2+3/03.vue-cli/demo/info.txt

```vue
<template>
  <div>
    <Count2 />
    <hr />
    <Person2 />
  </div>
</template>

<script>
export default {
  name: 'App',
  mounted() {
    // console.log('App',this)
  }
}
</script>
```

:::

:::details 点击查看 Count2 代码

<<< @/docs/.vuepress/components/Count2.vue

:::

:::details 点击查看 Person2 代码

<<< @/docs/.vuepress/components/Person2.vue

:::

:::details 点击查看 store 代码

<<< @/docs/.vuepress/store/index5.js

:::

:::details 点击查看 store/count 代码

<<< @/docs/.vuepress/store/count.js

:::

:::details 点击查看 store/person 代码

<<< @/docs/.vuepress/store/person.js

:::
