---
title: 搭建 vuex 环境
date: 2022-08-22 23:33:50
permalink: /798c65/
---

Vuex 工作原理图

![](../../.vuepress/public/img/vue2+3/008.png)

### 3.搭建 vuex 环境

需要先安装 `vuex`，要注意版本

vue2 中，要用 vuex 的 3 版本：`npm i vuex@3`

vue3 中，要用 vuex 的 4 版本：`npm i vuex`

还要注意 `import` 的优先级是最高的，即使别的代码编写在 `import` 之前，编译运行时也在 `import` 之后执行。

所以如果有代码需要在 `import` 之前执行，那么最好就在 `import` 这个文件中处理好

1. 创建文件：`src/store/index.js`

   ```js
   //引入 Vue 核心库
   import Vue from 'vue'
   //引入 Vuex
   import Vuex from 'vuex'
   //应用 Vuex 插件
   Vue.use(Vuex)

   //准备 actions 对象——响应组件中用户的动作
   const actions = {}
   //准备 mutations 对象——修改 state 中的数据
   const mutations = {}
   //准备 state 对象——保存具体的数据
   const state = {}

   //创建并暴露 store
   export default new Vuex.Store({
     actions,
     mutations,
     state
   })
   ```

2. 在`main.js`中创建 vm 时传入`store`配置项

   ```js
   ......
   //引入 store
   import store from './store'
   ......

   //创建 vm
   new Vue({
   	el:'#app',
   	render: h => h(App),
   	store
   })
   ```
