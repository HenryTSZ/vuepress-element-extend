---
title: 列表渲染
date: 2022-04-20 23:08:35
permalink: /0475ab/
---

## 基本列表

```
v-for 指令：
  1.用于展示列表数据
  2.语法：v-for="(item, index) in xxx" :key="yyy"
  3.v-for="(item, index) of xxx" 也可以，与 in 完全一样
  4.可遍历：数组、对象、字符串（用的很少）、指定次数（用的很少）
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-1.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-1.html

:::

## key 的原理

```
面试题：react、vue 中的 key 有什么作用？（key 的内部原理）

  1. 虚拟 DOM 中 key 的作用：
    key 是虚拟 DOM 对象的标识，当数据发生变化时，Vue 会根据【新数据】生成【新的虚拟 DOM】,
    随后 Vue 进行【新虚拟 DOM】与【旧虚拟 DOM】的差异比较，比较规则如下：

  2.对比规则：
    (1).旧虚拟 DOM 中找到了与新虚拟 DOM 相同的 key:
      ①.若虚拟 DOM 中内容没变，直接使用之前的真实 DOM！
      ②.若虚拟 DOM 中内容变了，则生成新的真实 DOM，随后替换掉页面中之前的真实 DOM。

    (2).旧虚拟 DOM 中未找到与新虚拟 DOM 相同的 key:
      创建新的真实 DOM，随后渲染到到页面。

  3. 用 index 作为 key 可能会引发的问题：
    1. 若对数据进行：逆序添加、逆序删除等破坏顺序操作：
      会产生没有必要的真实 DOM 更新 ==> 界面效果没问题，但效率低。

    2. 如果结构中还包含输入类的 DOM：
      会产生错误 DOM 更新 ==> 界面有问题。

  4. 开发中如何选择 key?:
    1.最好使用每条数据的唯一标识作为 key，比如 id、手机号、身份证号、学号等唯一值。

    2.如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，使用 index 作为 key 是没有问题的。
```

这里最好看一下原视频，讲解的非常好。[尚硅谷 Vue2.0+Vue3.0 全套教程丨 vuejs 从入门到精通\_哔哩哔哩\_bilibili](https://www.bilibili.com/video/BV1Zy4y1K7SH?p=30)

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-2.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-2.html

:::

有个疑问：当将同一个数组循环两遍，都用 id 作为 key，是否有问题？

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-3.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-3.html

:::

## 列表过滤

### watch 实现

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-4.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-4.html

:::

### computed 实现

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-5.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-5.html

:::

## 列表排序

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/13-6.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/13-6.html

:::
