---
title: 事件处理
date: 2022-04-11 22:50:58
permalink: /4e32f3/
---

## 事件的基本使用

```
事件的基本使用：
  1.使用 v-on:xxx 或 @xxx 绑定事件，其中 xxx 是事件名；
  2.事件的回调需要配置在 methods 对象中，最终会在 vm 上；
  3.methods 中配置的函数，不要用箭头函数！否则 this 就不是 vm 了；
  4.methods 中配置的函数，都是被 Vue 所管理的函数，this 的指向是 vm 或 组件实例对象；
  5.@click="demo" 和 @click="demo($event)" 效果一致，但后者可以传参；
  6.事件的回调也可以配置在 data 中，虽然也可以正常使用，但 vue 会给该方法添加 getter 和 setter，徒增无用功
```

关于 @click="demo" 是否加括号的一点小看法

当 demo 方法不需要参数时，@click="demo" 和 @click="demo()" 效果是一样的

当 demo 方法需要参数并且有默认值时，如：

```js
methods: {
  demo(value = 1) {
    console.log(value)
  }
}
```

@click="demo" 是把 event 当参数传入了，是错误的；@click="demo()" 没有传递参数，那就使用默认值，是正确的，所以这时候只能用加括号这种写法

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-1.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-1.html

:::

## 事件修饰符

```
Vue中的事件修饰符：
  1.prevent：阻止默认事件（常用）；
  2.stop：阻止事件冒泡（常用）；
  3.once：事件只触发一次（常用）；
  4.capture：使用事件的捕获模式；
  5.self：只有event.target是当前操作的元素时才触发事件；
  6.passive：事件的默认行为立即执行，无需等待事件回调执行完毕；
```

### 1.prevent：阻止默认事件（常用）；

```html
<a href="http://www.atguigu.com" @click.prevent="showInfo">点我提示信息</a>
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-2.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-2.html

:::

### 2.stop：阻止事件冒泡（常用）；

```html
<!-- 阻止事件冒泡（常用）-->
<div class="demo1" @click="showInfo">
  <button @click.stop="showInfo">点我提示信息</button>
</div>
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-3.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-3.html

:::

### 3.once：事件只触发一次（常用）；

```html
<!-- 事件只触发一次（常用）-->
<button @click.once="showInfo">点我提示信息</button>
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-4.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-4.html

:::

### 4.capture：使用事件的捕获模式；

```html
<!-- 使用事件的捕获模式 -->
<div class="demo1" @click.capture="showInfo(1)">
  <button @click="showInfo(2)">点我提示信息</button>
</div>
```

ps: 事件默认是先经过捕获 (外层到内层), 然后冒泡 (内层到外层), 事件触发是在冒泡阶段

当点击 button 时，

冒泡模式：输出顺序: 2, 1

捕获模式：输出顺序: 1, 2

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-5.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-5.html

:::

### 5.self：只有 event.target 是当前操作的元素时才触发事件；

```html
<!-- 只有 event.target 是当前操作的元素时才触发事件； -->
<div class="demo1" @click.self="showInfo">
  <button @click="showInfo">点我提示信息</button>
</div>
```

ps: 当点击 button 时，两个 showInfo 的 event 都是 button 元素

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-6.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-6.html

:::

### 6.passive：事件的默认行为立即执行，无需等待事件回调执行完毕；

```html
<!-- 事件的默认行为立即执行，无需等待事件回调执行完毕； -->
<ul @wheel.passive="demo" class="list">
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
</ul>
```

wheel 是鼠标滚轮滚动事件，不论滚动条是否可以滚动，wheel 都可以触发

如果不加 passive，滚轮滚动一下，需要在 for 循环完成后，滚动条才会滚动

加上 passive，滚动条立即滚动 (事件的默认行为立即执行), 不必等待 for 循环执行完成 (无需等待事件回调执行完毕)

scroll 是滚动条滚动事件，默认行为不受回调事件的影响，无需加 passive

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-7.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-7.html

:::

### 修饰符可以连续写

```html
<!-- 修饰符可以连续写 -->
<div class="demo1" @click="showInfo">
  <a href="http://www.atguigu.com" @click.prevent.stop="showInfo">点我提示信息</a>
</div>
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-8.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-8.html

:::

## 键盘事件

### 1.Vue 中常用的按键别名：

回车 => enter

删除 => delete (捕获“删除”和“退格”键)

退出 => esc

空格 => space

换行 => tab (特殊，必须配合 keydown 去使用，其余 8 个 keydown/keyup 都可以)

上 => up

下 => down

左 => left

右 => right

```html
<input type="text" placeholder="按下回车提示输入" @keydown.enter="showInfo" />
<!-- 回车的按键名称是 Enter，通过 event.key 获取，这里是 Vue 做了别名处理，方便书写; @keydown.Enter 也是可以的 -->
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-9.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-9.html

:::

### 2.Vue 未提供别名的按键，可以使用按键原始的 key 值去绑定，但注意要转为 kebab-case（短横线命名）

```html
<input type="text" placeholder="按下 CapsLock 提示输入" @keydown.caps-lock="showInfo" />
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-10.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-10.html

:::

### 3.系统修饰键（用法特殊）：ctrl、alt、shift、meta

(1).配合 keyup 使用：按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发。

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-11.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-11.html

:::

(2).配合 keydown 使用：正常触发事件。

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-12.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-12.html

:::

小技巧：

```html
<input type="text" placeholder="只有按下 ctrl + y 才提示输入" @keyup.ctrl.y="showInfo" />
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-13.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-13.html

:::

### 4.也可以使用 keyCode 去指定具体的按键（不推荐）[KeyboardEvent.keyCode - Web API 接口参考 | MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/KeyboardEvent/keyCode)

```html
<input type="text" placeholder="按下回车提示输入" @keydown.13="showInfo" />
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-14.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-14.html

:::

### 5.Vue.config.keyCodes.自定义键名 = 键码，可以去定制按键别名

```js
Vue.config.keyCodes.huiche = 13 // 定义了一个别名按键
```

```html
<input type="text" placeholder="按下回车提示输入" @keydown.huiche="showInfo" />
```

:::demo <<< @/docs/vue2+3/01.vue-basic/demo/info.txt

<<< @/docs/vue2+3/01.vue-basic/demo/07-15.vue

:::

:::details 点击查看代码

<<< @/docs/vue2+3/01.vue-basic/demo/07-15.html

:::
